{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '52802727-e127d4f3f7eb26b70bb46f136';\nconst PER_PAGE = 15;\n\nexport async function getImagesByQuery(query, page = 1) {\n\tconst params = new URLSearchParams({\n\t\tkey: API_KEY,\n\t\tq: query,\n\t\torientation: 'horizontal',\n\t\timage_type: 'photo',\n\t\tsafesearch: 'true',\n\t\tper_page: PER_PAGE,\n\t\tpage,\n\t});\n\n\tconst response = await axios.get(`${BASE_URL}?${params.toString()}`);\n\treturn response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst loadMoreButton = document.querySelector('.load_more');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nlet lightbox;\n\nfunction bindLightboxEvents() {\n\tif (!lightbox) return;\n\tlightbox.on('show.simplelightbox', () => {\n\t\tdocument.body.style.overflow = 'hidden';\n\t});\n\tlightbox.on('close.simplelightbox', () => {\n\t\tdocument.body.style.overflow = '';\n\t});\n}\n\nexport function createGallery(images) {\n\tconst galleryHTML = images\n\t\t.map(\n\t\t\timage => `\n      <li class=\"cart\">\n        <a class=\"photo_link\" href=\"${image.largeImageURL}\">\n          <img class=\"photo_image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n        </a>\n        <div class=\"photo_info\">\n          <p><b>Likes:</b> ${image.likes}</p>\n          <p><b>Views:</b> ${image.views}</p>\n          <p><b>Comments:</b> ${image.comments}</p>\n          <p><b>Downloads:</b> ${image.downloads}</p>\n        </div>\n      </li>`\n\t\t)\n\t\t.join('');\n\n\tgallery.insertAdjacentHTML('beforeend', galleryHTML);\n\n\tif (lightbox) {\n\t\tlightbox.refresh();\n\t} else {\n\t\tlightbox = new SimpleLightbox('.gallery a', {\n\t\t\tcaptionsData: 'alt',\n\t\t\tcaptionDelay: 250,\n\t\t});\n\t}\n\n\tbindLightboxEvents();\n}\n\nexport function clearGallery() {\n\tgallery.innerHTML = '';\n}\n\nexport function showLoader() {\n\tloader?.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n\tloader?.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n\tloadMoreButton.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n\tloadMoreButton.classList.add('hidden');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n\tcreateGallery,\n\tclearGallery,\n\tshowLoader,\n\thideLoader,\n\tshowLoadMoreButton,\n\thideLoadMoreButton,\n} from './js/render-functions.js';\n\nconst form = document.querySelector('.form');\nconst input = form.elements['search-text'];\nconst loadMoreButton = document.querySelector('.load_more');\n\nconst paramErr = {\n\ttitle: 'No results',\n\tmessage: 'Sorry, there are no images matching your search query. Please try again!',\n\tposition: 'center',\n\ttimeout: 3000,\n};\n\nconst paramInfo = {\n\ttitle: 'End of results',\n\tmessage: \"We're sorry, but you've reached the end of search results.\",\n\tposition: 'center',\n\ttimeout: 4000,\n};\n\nconst paramErrS = {\n\ttitle: 'Error',\n\tmessage: 'Something went wrong. Please try again later.',\n\tposition: 'center',\n\ttimeout: 3000,\n};\n\nlet page = 1;\nlet totalPages = 0;\nlet search = '';\n\nform.addEventListener('submit', clickSearch);\nloadMoreButton.addEventListener('click', nextPage);\n\nasync function clickSearch(event) {\n\tevent.preventDefault();\n\n\thideLoadMoreButton();\n\n\tconst query = input.value.trim();\n\n\tif (!query) {\n\t\tiziToast.warning({\n\t\t\ttitle: 'Warning',\n\t\t\tmessage: 'Please enter a search query.',\n\t\t\tposition: 'center',\n\t\t\ttimeout: 3000,\n\t\t});\n\t\treturn;\n\t}\n\n\tsearch = query;\n\tpage = 1;\n\tclearGallery();\n\tshowLoader();\n\n\ttry {\n\t\tconst data = await getImagesByQuery(search, page);\n\t\thideLoader();\n\n\t\tif (data.hits.length === 0) {\n\t\t\tiziToast.error(paramErr);\n\t\t\treturn;\n\t\t}\n\n\t\tcreateGallery(data.hits);\n\t\ttotalPages = Math.ceil(data.totalHits / 15);\n\t\tinput.value = '';\n\n\t\tif (page < totalPages) {\n\t\t\tshowLoadMoreButton();\n\t\t} else {\n\t\t\tiziToast.info(paramInfo);\n\t\t\thideLoadMoreButton();\n\t\t}\n\t} catch (error) {\n\t\thideLoader();\n\t\tiziToast.error(paramErrS);\n\t}\n}\n\nasync function nextPage() {\n\tif (page >= totalPages) {\n\t\thideLoadMoreButton();\n\t\tiziToast.info(paramInfo);\n\t\treturn;\n\t}\n\n\tpage += 1;\n\tshowLoader();\n\n\ttry {\n\t\tconst data = await getImagesByQuery(search, page);\n\t\thideLoader();\n\n\t\tif (data.hits.length === 0) {\n\t\t\tiziToast.error(paramErr);\n\t\t\treturn;\n\t\t}\n\n\t\tcreateGallery(data.hits);\n\n\t\tconst firstCard = document.querySelector('.gallery .cart');\n\t\tif (firstCard) {\n\t\t\tconst cardHeight = firstCard.getBoundingClientRect().height;\n\t\t\twindow.scrollBy({\n\t\t\t\ttop: cardHeight * 2,\n\t\t\t\tbehavior: 'smooth',\n\t\t\t});\n\t\t}\n\n\t\tif (page >= totalPages) {\n\t\t\thideLoadMoreButton();\n\t\t\tiziToast.info(paramInfo);\n\t\t}\n\t} catch (error) {\n\t\thideLoader();\n\t\tiziToast.error(paramErrS);\n\t}\n}\n"],"names":["BASE_URL","API_KEY","PER_PAGE","getImagesByQuery","query","page","params","axios","loadMoreButton","gallery","loader","lightbox","bindLightboxEvents","createGallery","images","galleryHTML","image","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","input","paramErr","paramInfo","paramErrS","totalPages","search","clickSearch","nextPage","event","iziToast","data","firstCard","cardHeight"],"mappings":"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"}