{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImagesByQuery(query, page = 1) {\n\treturn await axios\n\t\t.get('https://pixabay.com/api/' +\n\t\t\t'?key=' + '52802727-e127d4f3f7eb26b70bb46f136' +\n\t\t\t'&q=' + query +\n\t\t\t'&orientation=horizontal' +\n\t\t\t'&image_type=photo' +\n\t\t\t'&safesearch=true' +\n\t\t\t`&per_page=15` +\n\t\t\t'&page=' + page)\n\t\t.then(response => response.data);\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst loadMoreButton = document.querySelector('.load_more');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nlet lightbox;\n\nexport function createGallery(images) {\n\tconst galleryHTML = images\n\t\t.map(\n\t\t\timage => `\n      <li class=\"cart\">\n        <a class=\"photo_link\" href=\"${image.largeImageURL}\">\n          <img class=\"photo_image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n        </a>\n        <div class=\"photo_info\">\n          <p><b>Likes:</b> ${image.likes}</p>\n          <p><b>Views:</b> ${image.views}</p>\n          <p><b>Comments:</b> ${image.comments}</p>\n          <p><b>Downloads:</b> ${image.downloads}</p>\n        </div>\n      </li>`\n\t\t)\n\t\t.join('');\n\n\tgallery.insertAdjacentHTML('beforeend', galleryHTML);\n\n\t// ðŸŸ¢ Ð¯ÐºÑ‰Ð¾ lightbox Ð²Ð¶Ðµ Ñ–ÑÐ½ÑƒÑ” â€” Ð¾Ð½Ð¾Ð²Ð»ÑŽÑ”Ð¼Ð¾\n\tif (lightbox) {\n\t\tlightbox.refresh();\n\t} else {\n\t\t// ðŸ†• Ð†Ð½Ñ–Ñ†Ñ–Ð°Ð»Ñ–Ð·ÑƒÑ”Ð¼Ð¾ Ð²Ð¿ÐµÑ€ÑˆÐµ\n\t\tlightbox = new SimpleLightbox('.gallery a', {\n\t\t\tcaptionsData: 'alt',\n\t\t\tcaptionDelay: 250,\n\t\t});\n\t}\n\n\t// ðŸŸ¢ Ð”Ð¾Ð´Ð°Ñ”Ð¼Ð¾ Ð¾Ð±Ñ€Ð¾Ð±Ð½Ð¸ÐºÐ¸ ÐºÐ¾Ð¶Ð½Ð¾Ð³Ð¾ Ñ€Ð°Ð·Ñƒ (Ð±Ð¾ refresh Ð¼Ð¾Ð¶Ðµ Ñ—Ñ… \"Ð·Ð»Ð°Ð¼Ð°Ñ‚Ð¸\")\n\tlightbox.on('show.simplelightbox', () => {\n\t\tdocument.body.style.overflow = 'hidden';\n\t});\n\n\tlightbox.on('close.simplelightbox', () => {\n\t\tdocument.body.style.overflow = '';\n\t});\n}\n\nexport function clearGallery() {\n\tgallery.innerHTML = '';\n}\n\nexport function showLoader() {\n\tif (loader) loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n\tif (loader) loader.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n\tloadMoreButton.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n\tloadMoreButton.classList.add('hidden');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImagesByQuery } from './js/pixabay-api.js';\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from './js/render-functions.js';\n\nconst form = document.querySelector('.form');\nconst input = form.elements['search-text'];\nconst loadMoreButton = document.querySelector('.load_more');\n\nconst paramErr = {\n\ttitle: 'No results',\n\tmessage: 'Sorry, there are no images matching your search query. Please try again!',\n\tposition: 'center',\n\ttimeout: 3000,\n};\nconst paramInfo = {\n\ttitle: 'End of results',\n\tmessage: \"We're sorry, but you've reached the end of search results.\",\n\tposition: 'center',\n\ttimeout: 4000,\n};\nconst paramErrS = {\n\ttitle: 'Error',\n\tmessage: 'Something went wrong. Please try again later.',\n\tposition: 'center',\n\ttimeout: 3000,\n};\n\nlet page = 1;\nlet totalPages = 0;\nlet search = '';\n\nform.addEventListener(\"submit\", clickSearch);\n\nloadMoreButton.addEventListener(\"click\", () => {\n\tnextPage();\n});\n\nfunction clickSearch(event) {\n\tevent.preventDefault();\n\tif (!loadMoreButton.classList.contains('hidden')) {\n\t\thideLoadMoreButton();\n\t}\n\tshowLoader();\n\tconst query = input.value.trim();\n\tif (!query) {\n\t\tiziToast.warning({\n\t\t\ttitle: 'Warning',\n\t\t\tmessage: 'Please enter a search query.',\n\t\t\tposition: 'center',\n\t\t\ttimeout: 3000,\n\t\t});\n\t\treturn;\n\t}\n\tsearch = query;\n\tclearGallery();\n\tgetImagesByQuery(query)\n\t\t.then(data => {\n\t\t\tif (data.hits.length === 0) {\n\t\t\t\thideLoader();\n\t\t\t\tiziToast.error(paramErr);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcreateGallery(data.hits);\n\t\t\ttotalPages = Math.ceil(data.totalHits / 15);\n\t\t\tinput.value = '';\n\t\t\thideLoader();\n\t\t\tif (totalPages > page) {\n\t\t\t\tshowLoadMoreButton();\n\t\t\t} else {\n\t\t\t\thideLoadMoreButton();\n\t\t\t\tiziToast.info(paramInfo)\n\t\t\t}\n\t\t})\n\t\t.catch(error => {\n\t\t\thideLoader();\n\t\t\tiziToast.error(paramErrS);\n\t\t});\n}\n\nfunction nextPage() {\n\tif (page < totalPages) {\n\t\tshowLoader();\n\t\tconst query = search;\n\t\tpage += 1;\n\t\tgetImagesByQuery(query, page)\n\t\t\t.then(data => {\n\t\t\t\tif (data.hits.length === 0) {\n\t\t\t\t\thideLoader();\n\t\t\t\t\tiziToast.error(paramErr);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tcreateGallery(data.hits);\n\t\t\t\thideLoader();\n\t\t\t\tconst firstCard = document.querySelector('.gallery .cart');\n\t\t\t\tif (firstCard) {\n\t\t\t\t\tconst cardHeight = firstCard.getBoundingClientRect().height;\n\t\t\t\t\twindow.scrollBy({\n\t\t\t\t\t\ttop: cardHeight * 2,\n\t\t\t\t\t\tbehavior: 'smooth'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (page >= totalPages) {\n\t\t\t\t\thideLoadMoreButton();\n\t\t\t\t\tiziToast.info(paramInfo);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\thideLoader();\n\t\t\t\tiziToast.error(paramErrS);\n\t\t\t});\n\t} else {\n\t\thideLoadMoreButton();\n\t\tiziToast.info(paramInfo);\n\t}\n}\n"],"names":["getImagesByQuery","query","page","axios","response","loadMoreButton","gallery","loader","lightbox","createGallery","images","galleryHTML","image","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","input","paramErr","paramInfo","paramErrS","totalPages","search","clickSearch","nextPage","event","iziToast","data","error","firstCard","cardHeight"],"mappings":"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"}